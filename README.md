DocumentForKafka

Java version 17.0.10

Spring Boot

Maven

Назначение приложения:

Приложение для отправки сообщений из системной папки в Kafka.



Краткое описание принципов работы:

Приложение запускается командой 


Приложение обращается к системной папке, которая была создана по пути, который укажут владельцы сервера.

Данные передаются потоком байтов по протоколу передачи данных на основе TCP.

Обращается к системной папке по расписанию - cron-выражение.

Логи работы приложения пишутся в системную папку сервера - папку создают владельцы сервера, по пути, который им необходим.

Команда для запуска приложения - java -jar DocumentFromSomeService-0.0.1-SNAPSHOT.jar

Для запуска на разных серверах, необходимо составить конфиг-файл с необходимыми данными и запустить командой java -jar DocumentFromSomeService-0.0.1-SNAPSHOT.jar --spring.config.location=<name>.yml

Формат передаваемых файлов - xml, json, csv. Файлы с иными форматами являются not valid. Им присваивается формат .bad, файлы не отправляются в Kafka и остаются в папке.

Настройка размера передаваемых сообщений в Kafka → max 10МБ

Количество topics - в зависимости от запроса заказчика

Количество partitions in one topic - default  → 1

Описание файла конфигурации: какие параметры и для чего служат

- environment-variables:
    - PATH= <system-folder-document> - путь до системной папки, где находятся документы для передачи
    - TOPIC_NAME= Name Kafka Topic
    - CRON_JOB= CRON выражение расписания - устанавливается заказчиком - это расписание обращения приложения к сетевой папке (Attention! не путать с расписанием запуска приложения)
      Инструкция по составлению cron выражения.rtf
    - FILE_LOGS=<system-folder> - путь до системной папки логов
    - BOOTSTRAP_SERVERS= IP-address BOOTSTRAP SERVERS Kafka
    - sendSizeMessage - размер передаваемых файлов, default не более 10MB
    - pattern:rolling-file-name - <system-folder> - путь до системной папки логов/формат даты логов - по default стоит logs-%d{yyyy-MM-dd}.%i.log
    - topics:topics-mapping - данный параметр заполняется значениями в формате fileName:topicName, где fileName - название(ключевая часть названия) файла, по которому будет производиться поиск топика, topicName - название топика в Kafka
    - basket:path - прописывается путь до директории в которой будет создана папка basket - папка создается приложением, название заказчиком самостоятельно не меняется
